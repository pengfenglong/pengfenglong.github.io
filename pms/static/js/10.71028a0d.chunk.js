webpackJsonp([10],{525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(531),l=(n.n(a),n(121)),r=n.n(l),c=n(79),o=(n.n(c),n(63)),i=n.n(o),u=n(573),s=(n.n(u),n(574)),d=n.n(s),p=n(7),m=n.n(p),f=n(78),h=n.n(f),y=n(16),E=n.n(y),v=n(19),b=n.n(v),w=n(17),j=n.n(w),k=n(18),x=n.n(k),C=n(533),g=(n.n(C),n(536)),O=n.n(g),_=n(537),N=(n.n(_),n(535)),S=n.n(N),T=n(1),A=n.n(T),I=(n(202),n(559)),Q=n(210),U=n(6),z=(S.a.Option,I.d.confirm,O.a.Search,I.d.prompt,function(e){function t(e){E()(this,t);var n=j()(this,(t.__proto__||h()(t)).call(this,e));return n.state={data:[]},n}return x()(t,e),b()(t,[{key:"handleQueryAll",value:function(){var e=this;Object(U.d)({url:"rest/pms/project/list?filter="+m()({where:[{propertyName:"region_id",propertyValue:this.props.params.regionId,matchType:"=",logicalExpression:"and"}]}),success:function(t){e.setState({data:t.data})}})}},{key:"componentDidMount",value:function(){this.handleQueryAll()}},{key:"render",value:function(){var e=this,t=this.state.data.map(function(t){return{id:t.id,icon:A.a.createElement("div",{onClick:function(){Object(U.d)({url:"rest/pms/project/delete/"+t.id,type:"delete",success:function(t){e.handleQueryAll()}})},style:{position:"absolute",right:10,top:10,cursor:"pointer"}},A.a.createElement(r.a,{type:"delete"})),text:A.a.createElement("div",{style:{padding:"12.5px"}},A.a.createElement(I.c,null,A.a.createElement(I.b,{defaultValue:t.name,onBlur:function(e){e!=t.name&&Object(U.d)({url:"rest/pms/project/update/"+t.id,type:"put",headers:{"Content-Type":"application/text"},data:m()({name:e}),success:function(e){I.f.success("\u4fee\u6539\u6210\u529f!",1)}})}},A.a.createElement("b",null,"\u9879\u76ee\u540d\u79f0")),A.a.createElement(I.b,{defaultValue:t.schedule,onBlur:function(e){e!=t.schedule&&Object(U.d)({url:"rest/pms/project/update/"+t.id,type:"put",headers:{"Content-Type":"application/text"},data:m()({schedule:e}),success:function(e){I.f.success("\u4fee\u6539\u6210\u529f!",1)}})}},A.a.createElement("b",null,"\u9879\u76ee\u8fdb\u5ea6")),A.a.createElement(I.c.Item,{extra:A.a.createElement(i.a,{onClick:function(){var t=[];t.push({id:0,text:A.a.createElement(d.a,{action:Object(U.e)().hostUrl+"rest/pms/product/uploadToLocal",name:"file",headers:{Authorization:"Bearer "+window.sessionStorage.getItem("edesk-token")},withCredentials:!0,listType:"picture-card",multiple:!1,showUploadList:!1,onPreview:function(){},beforeUpload:function(e,t){return!0},onChange:function(t){"done"===t.file.status&&e.handleQueryAll()}},A.a.createElement("div",null,A.a.createElement(r.a,{type:"plus-circle",style:{fontSize:30,cursor:"pointer"}}),A.a.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20\u7ec4\u7ec7\u67b6\u6784")))}),Q.a.show({width:"80%",title:"\u67e5\u770b\u9879\u76ee\u7ec4\u7ec7\u7ed3\u6784",footer:null,onOk:function(e){Q.a.destory()},onCancel:function(){Q.a.destory()},content:A.a.createElement("div",null,A.a.createElement(I.a,{data:t,columnNum:4}))})}},"\u67e5\u770b")},A.a.createElement("b",null,"\u9879\u76ee\u7ec4\u7ec7\u7ed3\u6784")),A.a.createElement(I.c.Item,{extra:A.a.createElement(i.a,{onClick:function(){var t=[];t.push({id:0,text:A.a.createElement(d.a,{action:Object(U.e)().hostUrl+"rest/pms/product/uploadToLocal",name:"file",headers:{Authorization:"Bearer "+window.sessionStorage.getItem("edesk-token")},withCredentials:!0,listType:"picture-card",multiple:!1,showUploadList:!1,onPreview:function(){},beforeUpload:function(e,t){return!0},onChange:function(t){"done"===t.file.status&&e.handleQueryAll()}},A.a.createElement("div",null,A.a.createElement(r.a,{type:"plus-circle",style:{fontSize:30,cursor:"pointer"}}),A.a.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20\u9879\u76ee\u8fdb\u5c55\u5468\u6c47\u603b")))}),Q.a.show({width:"80%",title:"\u67e5\u770b\u9879\u76ee\u8fdb\u5c55\u5468\u6c47\u603b",footer:null,onOk:function(e){Q.a.destory()},onCancel:function(){Q.a.destory()},content:A.a.createElement("div",null,A.a.createElement(I.a,{data:t,columnNum:4}))})}},"\u67e5\u770b")},A.a.createElement("b",null,"\u9879\u76ee\u8fdb\u5c55\u5468\u6c47\u603b")),A.a.createElement(I.c.Item,null,A.a.createElement(i.a,{type:"primary",onClick:function(){window.location.hash="/pms/equipment/"+t.id}},"\u67e5\u770b\u8bbe\u5907"))))}});return t.push({id:0,text:A.a.createElement("div",{onClick:function(){Q.a.show({width:"80%",footer:{readonly:!1,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},onOk:function(t){var n=e.projectName_input.inputRef.inputRef.value,a=e.projectSchedule_input.inputRef.inputRef.value;Object(U.d)({url:"rest/pms/project/create",type:"post",data:m()({region_id:e.props.params.regionId,name:n,schedule:a}),success:function(t){e.handleQueryAll(),I.f.success("\u6dfb\u52a0\u6210\u529f!",1),Q.a.destory()}})},onCancel:function(){Q.a.destory()},content:A.a.createElement("div",null,A.a.createElement(I.c,null,A.a.createElement(I.b,{clear:!0,placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0",ref:function(t){return e.projectName_input=t}},"\u9879\u76ee\u540d\u79f0"),A.a.createElement(I.b,{clear:!0,placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u8fdb\u5ea6",ref:function(t){return e.projectSchedule_input=t}},"\u9879\u76ee\u8fdb\u5ea6")))})}},A.a.createElement(r.a,{type:"plus-circle",style:{fontSize:30,cursor:"pointer"}}),A.a.createElement("div",{className:"ant-upload-text"},"\u65b0\u5efa\u9879\u76ee"))}),A.a.createElement("div",{className:"pms-project-container"},A.a.createElement(I.a,{data:t,columnNum:4}))}}]),t}(A.a.Component));t.default=z}});