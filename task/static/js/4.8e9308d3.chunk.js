webpackJsonp([4],{480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(531),a=(n.n(i),n(532)),o=n.n(a),r=n(606),l=(n.n(r),n(607)),s=n.n(l),u=n(485),p=(n.n(u),n(486)),c=n.n(p),f=n(496),d=(n.n(f),n(497)),m=n.n(d),h=n(493),v=(n.n(h),n(494)),g=n.n(v),y=n(556),b=(n.n(y),n(557)),C=n.n(b),O=n(502),w=(n.n(O),n(503)),P=n.n(w),_=n(511),E=(n.n(_),n(512)),k=n.n(E),N=n(536),x=(n.n(N),n(537)),j=n.n(x),A=n(529),D=(n.n(A),n(530)),M=n.n(D),S=n(891),T=(n.n(S),n(893)),V=n.n(T),R=n(517),z=(n.n(R),n(518)),H=n.n(z),I=n(115),W=n.n(I),F=n(6),L=n.n(F),U=n(113),B=n.n(U),X=n(108),Y=n.n(X),Z=n(111),q=n.n(Z),J=n(109),G=n.n(J),K=n(110),Q=n.n(K),$=n(499),ee=(n.n($),n(500)),te=n.n(ee),ne=n(610),ie=(n.n(ne),n(611)),ae=n.n(ie),oe=n(5),re=n.n(oe),le=n(187),se=(n.n(le),n(533),n(535)),ue=(n(194),n(20)),pe=ae.a.CheckboxItem,ce=c.a.Item,fe=ce.Brief,de=te.a.operation,me=function(e){function t(e){Y()(this,t);var n=G()(this,(t.__proto__||B()(t)).call(this,e));return n.state={item:{},files:[],comments:[],logs:[],tags:[],checklist:[],list:{},board:{},lists:[],owner:null},n}return Q()(t,e),q()(t,[{key:"componentDidMount",value:function(){var e=this;window.dd.biz.navigation.setLeft({control:!0,text:"\u8fd4\u56de",onSuccess:function(e){},onFail:function(e){}}),window.dd.biz.navigation.setTitle({title:"\u4efb\u52a1\u8be6\u60c5",onSuccess:function(e){},onFail:function(e){}}),window.dd.biz.navigation.setMenu({items:[{id:"1",text:"\u7f16\u8f91"},{id:"2",text:"\u5220\u9664"},{id:"3",text:"\u79fb\u52a8"}],onSuccess:function(t){"1"===t.id?e.handleEdit():"2"===t.id?e.handleDelete():"3"===t.id&&e.handleMove()},onFail:function(e){}}),Object(ue.e)({url:"rest/cms/article/find/"+this.props.params.id,success:function(t){e.setState({item:t.data.base,files:t.data.files,comments:t.data.comments,logs:t.data.logs,tags:t.data.tags,checklist:t.data.checklist,list:t.data.channel,board:t.data.site,owner:t.data.owner}),Object(ue.e)({url:"rest/cms/channel/tree?filter="+L()({currentPage:1,pageSize:100,where:[{propertyName:"site_id",propertyValue:t.data.site.id,matchType:"=",logicalExpression:"and"}]}),success:function(t){e.setState({lists:t.data.result})}})}})}},{key:"handleAddComment",value:function(){var e=this,t=this.comment_input.textareaRef.value;""!==t&&null!==t&&(Object(ue.e)({url:"rest/cms/article/addComment",type:"post",data:L()({article_id:this.props.params.id,content:this.comment_input.textareaRef.value}),success:function(t){t.data.creator_id=window.loginUser.id,t.data.creator_name=window.loginUser.name,t.data.creator_avatar=window.loginUser.avatar,e.setState({comments:[t.data].concat(W()(e.state.comments))})}}),this.comment_input.clearInput())}},{key:"handleEdit",value:function(){window.location.hash="/task/item/edit/"+this.props.params.id}},{key:"handleDelete",value:function(){Object(ue.e)({url:"rest/cms/article/delete/"+this.props.params.id,type:"delete",success:function(e){alert("\u5220\u9664\u6210\u529f!"),window.history.back()}})}},{key:"handleMove",value:function(){var e=this;de(this.state.lists.map(function(t){return{text:re.a.createElement("div",null,re.a.createElement("span",null,t.name),e.state.list.id===t.id?re.a.createElement(m.a,{type:"check",style:{float:"right",margin:"10px"}}):null),onPress:function(){Object(ue.e)({url:"rest/cms/article/update/"+e.props.params.id,type:"put",headers:{"Content-Type":"application/text"},data:L()({channel_id:t.id}),success:function(e){H.a.success("\u79fb\u52a8\u6210\u529f!",1)}})}}}))}},{key:"render",value:function(){var e=this,t=this.state.item,n=t.title,i=t.content,a=t.end_time,r=t.workload;return re.a.createElement("div",null,window.dd.version?null:re.a.createElement(M.a,{mode:"dark",icon:re.a.createElement(m.a,{type:"left"}),onLeftClick:function(){window.history.back()},rightContent:re.a.createElement(V.a,{mask:!0,overlayClassName:"fortest",overlayStyle:{color:"currentColor"},overlay:[re.a.createElement(ce,{onClick:function(){e.handleEdit()}},"\u7f16\u8f91"),re.a.createElement(ce,{onClick:function(){e.handleDelete()}},"\u5220\u9664"),re.a.createElement(ce,{onClick:function(){e.handleMove()}},"\u79fb\u52a8")],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]}},re.a.createElement(m.a,{type:"ellipsis"}))},"\u4efb\u52a1\u8be6\u60c5"),re.a.createElement(c.a,null,re.a.createElement(ce,{wrap:!0},re.a.createElement("span",{style:{"font-weight":"bolder"}},"\u3010\u6765\u6e90\u3011"),this.state.board.name," -> ",this.state.list.name),re.a.createElement(ce,{wrap:!0},re.a.createElement("span",{style:{"font-weight":"bolder"}},"\u3010\u6807\u9898\u3011"),n),re.a.createElement(ce,{wrap:!0},re.a.createElement("span",{style:{"font-weight":"bolder"}},"\u3010\u8be6\u60c5\u3011"),i),re.a.createElement(ce,null,re.a.createElement("span",{style:{"font-weight":"bolder"}},"\u3010\u7ed3\u675f\u65f6\u95f4\u3011"),Object(ue.b)(new Date(a))),re.a.createElement(ce,null,re.a.createElement("span",{style:{"font-weight":"bolder"}},"\u3010\u5de5\u4f5c\u91cf\u3011"),r),re.a.createElement(ce,null,re.a.createElement("span",{style:{"font-weight":"bolder"}},"\u3010\u8d23\u4efb\u4eba\u3011"),this.state.owner?re.a.createElement(se.a,{name:this.state.owner.name,img:this.state.owner.avatar,showName:!0}):null),re.a.createElement(ce,null,re.a.createElement("span",{style:{"font-weight":"bolder"}},"\u3010\u6807\u7b7e\u3011"),this.state.tags.map(function(e){return re.a.createElement(j.a,{color:e.color},e.name)}))),re.a.createElement("div",null,re.a.createElement(o.a,{tabs:[{title:"\u8bc4\u8bba "+this.state.comments.length},{title:"\u68c0\u67e5\u9879 "+this.state.checklist.length},{title:"\u9644\u4ef6 "+this.state.files.length},{title:"\u8bb0\u5f55 "+this.state.logs.length}],initalPage:1},re.a.createElement("div",null,this.state.comments.map(function(e){return re.a.createElement("div",null,re.a.createElement(k.a,null,re.a.createElement(k.a.Body,null,re.a.createElement("div",null,re.a.createElement(se.a,{name:e.creator_name,img:e.creator_avatar}),re.a.createElement("span",{style:{margin:"-10px 5px"}},e.content))),re.a.createElement(k.a.Footer,{content:re.a.createElement("span",null,e.creator_name),extra:re.a.createElement("div",{style:{float:"left"}},Object(ue.b)(new Date(e.create_time)))})))}),re.a.createElement("div",null,re.a.createElement(P.a,null),re.a.createElement("div",{style:{float:"left",width:"calc(100vw - 65px)"}},re.a.createElement(C.a,{placeholder:"\u6dfb\u52a0\u8bc4\u8bba","data-seed":"logId",autoHeight:!0,ref:function(t){return e.comment_input=t}})),re.a.createElement("div",{style:{float:"left",width:"60px","margin-left":"5px",height:30}},re.a.createElement(g.a,{onClick:this.handleAddComment.bind(this)},"\u53d1\u5e03")))),re.a.createElement("div",null,re.a.createElement(c.a,null,this.state.checklist.map(function(e){return re.a.createElement(pe,{checked:0!==e.status,key:e.id,disabled:!0},e.content)}))),re.a.createElement("div",null,re.a.createElement(c.a,null,this.state.files.map(function(e){return re.a.createElement(ce,{align:"top",onClick:function(){window.location.href=Object(ue.f)().fileupload_url+e.path},thumb:-1==e.type.indexOf("image")?re.a.createElement(m.a,{type:"file",style:{"font-size":"25px"}}):re.a.createElement("img",{src:e.path,style:{width:50,height:50}}),multipleLine:!0},e.name,re.a.createElement(fe,null,e.size,"B \xa0\xa0 ",Object(ue.b)(new Date(e.update_time))))}))),re.a.createElement("div",{style:{padding:20}},re.a.createElement(s.a,null,this.state.logs.map(function(e){return re.a.createElement(s.a.Item,{dot:re.a.createElement(se.a,{name:e.creator_name,img:e.creator_avatar})},e.creator_name," \xa0 ",e.detail," \xa0 ",Object(ue.b)(new Date(e.create_time)))}))))))}}]),t}(re.a.Component);t.default=me},606:function(e,t,n){"use strict";n(491),n(887)},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(888),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=a.default,e.exports=t.default},608:function(e,t,n){"use strict";var i=n(108),a=n.n(i),o=n(111),r=n.n(o),l=n(109),s=n.n(l),u=n(110),p=n.n(u),c=n(5),f=n.n(c),d=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&(n[i[a]]=e[i[a]]);return n},m=function(e){function t(){return a()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),r()(t,[{key:"shouldComponentUpdate",value:function(e){return e.hiddenClassName||e.visible}},{key:"render",value:function(){var e=this.props,t=e.hiddenClassName,n=e.visible,i=d(e,["hiddenClassName","visible"]);return t||f.a.Children.count(i.children)>1?(!n&&t&&(i.className+=" "+t),f.a.createElement("div",i)):f.a.Children.only(i.children)}}]),t}(c.Component);t.a=m},609:function(e,t,n){"use strict";function i(e,t){return e[0]===t[0]&&e[1]===t[1]}function a(e,t,n){var i=e[t]||{};return s()({},i,n)}function o(e,t,n){var a=n.points;for(var o in e)if(e.hasOwnProperty(o)&&i(e[o].points,a))return t+"-placement-"+o;return""}function r(e,t){this[e]=t}t.a=a,t.b=o,t.c=r;var l=n(482),s=n.n(l)},887:function(e,t,n){e.exports=n.p+"static/media/index.9db65983.less"},888:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(482),o=i(a),r=n(484),l=i(r),s=n(108),u=i(s),p=n(111),c=i(p),f=n(109),d=i(f),m=n(110),h=i(m),v=n(5),g=i(v),y=n(483),b=i(y),C=n(889),O=i(C),w=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&(n[i[a]]=e[i[a]]);return n},P=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.children,i=e.pending,a=e.className,r=w(e,["prefixCls","children","pending","className"]),s="boolean"===typeof i?null:i,u=(0,b.default)(t,(0,l.default)({},t+"-pending",!!i),a),p=v.Children.toArray(n).filter(function(e){return!!e}),c=v.Children.map(p,function(e,t){return g.default.cloneElement(e,{last:t===v.Children.count(p)-1})}),f=i?g.default.createElement(O.default,{pending:!!i},s):null;return g.default.createElement("ul",(0,o.default)({},r,{className:u}),c,f)}}]),t}(g.default.Component);t.default=P,P.Item=O.default,P.defaultProps={prefixCls:"ant-timeline"},e.exports=t.default},889:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(482),o=i(a),r=n(484),l=i(r),s=n(108),u=i(s),p=n(111),c=i(p),f=n(109),d=i(f),m=n(110),h=i(m),v=n(5),g=i(v),y=n(483),b=i(y),C=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&(n[i[a]]=e[i[a]]);return n},O=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e,t,n=this.props,i=n.prefixCls,a=n.className,r=n.color,s=void 0===r?"":r,u=n.last,p=n.children,c=n.pending,f=n.dot,d=C(n,["prefixCls","className","color","last","children","pending","dot"]),m=(0,b.default)((e={},(0,l.default)(e,i+"-item",!0),(0,l.default)(e,i+"-item-last",u),(0,l.default)(e,i+"-item-pending",c),e),a),h=(0,b.default)((t={},(0,l.default)(t,i+"-item-head",!0),(0,l.default)(t,i+"-item-head-custom",f),(0,l.default)(t,i+"-item-head-"+s,!0),t));return g.default.createElement("li",(0,o.default)({},d,{className:m}),g.default.createElement("div",{className:i+"-item-tail"}),g.default.createElement("div",{className:h,style:{borderColor:/blue|red|green/.test(s)?null:s}},f),g.default.createElement("div",{className:i+"-item-content"},p))}}]),t}(g.default.Component);t.default=O,O.defaultProps={prefixCls:"ant-timeline",color:"blue",last:!1,pending:!1},e.exports=t.default},891:function(e,t,n){"use strict";n(490),n(892)},892:function(e,t,n){e.exports=n.p+"static/media/index.2279f4b5.less"},893:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e};return v.default.Children.map(e,function(e,n){var i=t(e,n);return"string"!==typeof i&&"number"!==typeof i&&i&&i.props&&i.props.children?v.default.cloneElement(i,{},a(i.props.children,t)):i})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(482),r=i(o),l=n(108),s=i(l),u=n(111),p=i(u),c=n(109),f=i(c),d=n(110),m=i(d),h=n(5),v=i(h),g=n(894),y=i(g),b=n(904),C=i(b),O=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&(n[i[a]]=e[i[a]]);return n},w=function(e){function t(){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.overlay,n=e.onSelect,i=void 0===n?function(){}:n,o=O(e,["overlay","onSelect"]),l=a(t,function(e,t){var n={firstItem:!1};return e&&"string"!==typeof e&&"number"!==typeof e&&e.type&&"PopoverItem"===e.type.myName&&!e.props.disabled?(n.onClick=function(){return i(e,t)},n.firstItem=0===t,v.default.cloneElement(e,n)):e}),s=v.default.createElement("div",{className:this.props.prefixCls+"-inner-wrapper"},l);return v.default.createElement(y.default,(0,r.default)({},o,{overlay:s}))}}]),t}(v.default.Component);t.default=w,w.defaultProps={prefixCls:"am-popover",placement:"bottomRight",align:{overflow:{adjustY:0,adjustX:0}},trigger:["click"]},w.Item=C.default,e.exports=t.default},894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(895);t.default=i.a},895:function(e,t,n){"use strict";var i=n(482),a=n.n(i),o=n(108),r=n.n(o),l=n(111),s=n.n(l),u=n(109),p=n.n(u),c=n(110),f=n.n(c),d=n(5),m=n.n(d),h=n(896),v=n(903),g=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&(n[i[a]]=e[i[a]]);return n},y=function(e){function t(){r()(this,t);var e=p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getPopupElement=function(){var t=e.props,n=t.arrowContent,i=t.overlay,a=t.prefixCls;return[m.a.createElement("div",{className:a+"-arrow",key:"arrow"},n),m.a.createElement("div",{className:a+"-inner",key:"content"},"function"===typeof i?i():i)]},e.saveTrigger=function(t){e.trigger=t},e}return f()(t,e),s()(t,[{key:"getPopupDomNode",value:function(){return this.trigger.triggerRef.getPopupDomNode()}},{key:"render",value:function(){var e=this.props,t=e.overlayClassName,n=e.overlayStyle,i=e.prefixCls,o=e.children,r=e.onVisibleChange,l=e.afterVisibleChange,s=e.transitionName,u=e.animation,p=e.placement,c=e.align,f=e.destroyTooltipOnHide,d=e.defaultVisible,y=e.getTooltipContainer,b=g(e,["overlayClassName","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),C=a()({},b);return"visible"in this.props&&(C.popupVisible=this.props.visible),m.a.createElement(h.a,a()({popupClassName:t,ref:this.saveTrigger,prefixCls:i,popup:this.getPopupElement,builtinPlacements:v.a,popupPlacement:p,popupAlign:c,getPopupContainer:y,onPopupVisibleChange:r,afterPopupVisibleChange:l,popupTransitionName:s,popupAnimation:u,defaultPopupVisible:d,destroyPopupOnHide:f,popupStyle:n},C),o)}}]),t}(d.Component);y.defaultProps={prefixCls:"rmc-tooltip",destroyTooltipOnHide:!1,align:{},placement:"right",arrowContent:null},t.a=y},896:function(e,t,n){"use strict";function i(){}function a(){return""}function o(){return window.document}var r=n(482),l=n.n(r),s=n(108),u=n.n(s),p=n(111),c=n.n(p),f=n(109),d=n.n(f),m=n(110),h=n.n(m),v=n(5),g=n.n(v),y=n(897),b=function(e){function t(e){u()(this,t);var n=d()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onTargetClick=function(){n.setPopupVisible(!n.state.popupVisible)},n.onClose=function(){n.setPopupVisible(!1)};var i=void 0;return i="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,n.state={popupVisible:i},n}return h()(t,e),c()(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.visible&&this.setPopupVisible(e.visible)}},{key:"setPopupVisible",value:function(e){this.state.popupVisible!==e&&(this.setState({popupVisible:e}),this.props.onPopupVisibleChange(e))}},{key:"render",value:function(){var e=this;return g.a.createElement(y.a,l()({ref:function(t){return e.triggerRef=t}},this.props,{visible:this.state.popupVisible,onTargetClick:this.onTargetClick,onClose:this.onClose}))}}]),t}(g.a.Component);b.displayName="TriggerWrap",b.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:a,getDocument:o,onPopupVisibleChange:i,afterPopupVisibleChange:i,onPopupAlign:i,popupClassName:"",popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0},t.a=b},897:function(e,t,n){"use strict";function i(){}function a(){return""}function o(){return window.document}var r=n(482),l=n.n(r),s=n(108),u=n.n(s),p=n(111),c=n.n(p),f=n(109),d=n.n(f),m=n(110),h=n.n(m),v=n(5),g=n.n(v),y=n(112),b=n.n(y),C=n(573),O=n(525),w=n.n(O),P=n(898),_=n(609),E=!!g.a.createPortal,k=function(e){function t(){u()(this,t);var e=d()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onDocumentClick=function(t){if(!e.props.mask||e.props.maskClosable){var n=t.target,i=Object(y.findDOMNode)(e),a=e.getPopupDomNode();Object(C.a)(i,n)||Object(C.a)(a,n)||e.close()}},e.getPopupAlign=function(){var t=e.props,n=t.popupPlacement,i=t.popupAlign,a=t.builtinPlacements;return n&&a?Object(_.a)(a,n,i):i},e.getRootDomNode=function(){return Object(y.findDOMNode)(e)},e.getPopupClassNameFromAlign=function(t){var n=[],i=e.props,a=i.popupPlacement,o=i.builtinPlacements,r=i.prefixCls;return a&&o&&n.push(Object(_.b)(o,r,t)),i.getPopupClassNameFromAlign&&n.push(i.getPopupClassNameFromAlign(t)),n.join(" ")},e.close=function(){e.props.onClose&&e.props.onClose()},e.onAnimateLeave=function(){if(e.props.destroyPopupOnHide){var t=e._container;t&&(b.a.unmountComponentAtNode(t),t.parentNode.removeChild(t))}},e.removeContainer=function(){var t=document.querySelector("#"+e.props.prefixCls+"-container");t&&(b.a.unmountComponentAtNode(t),t.parentNode.removeChild(t))},e}return h()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.props.visible&&this.componentDidUpdate()}},{key:"componentWillUnmount",value:function(){this.props.visible&&(E||this.renderDialog(!1)),this.clearOutsideHandler()}},{key:"componentDidUpdate",value:function(){var e=this;if(E||this.renderDialog(this.props.visible),this.props.visible)return void(this.touchOutsideHandler||(this.touchOutsideHandler=setTimeout(function(){var t=e.props.getDocument();e.touchOutsideHandler=w()(t,"click",e.onDocumentClick)})));this.clearOutsideHandler()}},{key:"clearOutsideHandler",value:function(){this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"getPopupDomNode",value:function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null}},{key:"saveRef",value:function(e,t){this.popupRef=e,this._component=e,this.props.afterPopupVisibleChange(t)}},{key:"getComponent",value:function(e){var t=this,n=l()({},this.props);return["visible","onAnimateLeave"].forEach(function(e){n.hasOwnProperty(e)&&delete n[e]}),g.a.createElement(P.a,{key:"popup",ref:function(n){return t.saveRef(n,e)},prefixCls:n.prefixCls,destroyPopupOnHide:n.destroyPopupOnHide,visible:e,className:n.popupClassName,align:this.getPopupAlign(),onAlign:n.onPopupAlign,animation:n.popupAnimation,getClassNameFromAlign:this.getPopupClassNameFromAlign,getRootDomNode:this.getRootDomNode,style:n.popupStyle,mask:n.mask,zIndex:n.zIndex,transitionName:n.popupTransitionName,maskAnimation:n.maskAnimation,maskTransitionName:n.maskTransitionName,onAnimateLeave:this.onAnimateLeave},"function"===typeof n.popup?n.popup():n.popup)}},{key:"getContainer",value:function(){if(!this._container){var e=this.props,t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%";(e.getPopupContainer?e.getPopupContainer(Object(y.findDOMNode)(this)):e.getDocument().body).appendChild(t),this._container=t}return this._container}},{key:"renderDialog",value:function(e){b.a.unstable_renderSubtreeIntoContainer(this,this.getComponent(e),this.getContainer())}},{key:"render",value:function(){var e=this.props,t=e.children,n=g.a.Children.only(t),i={onClick:this.props.onTargetClick,key:"trigger"},a=g.a.cloneElement(n,i);if(!E)return a;var o=void 0;return(e.visible||this._component)&&(o=b.a.createPortal(this.getComponent(e.visible),this.getContainer())),[a,o]}}]),t}(g.a.Component);t.a=k,k.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:a,getDocument:o,onPopupVisibleChange:i,afterPopupVisibleChange:i,onPopupAlign:i,popupClassName:"",popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0}},898:function(e,t,n){"use strict";var i=n(482),a=n.n(i),o=n(108),r=n.n(o),l=n(111),s=n.n(l),u=n(109),p=n.n(u),c=n(110),f=n.n(c),d=n(5),m=n.n(d),h=n(112),v=n.n(h),g=n(899),y=n(501),b=n(902),C=n(608),O=n(609),w=function(e){function t(e){r()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onAlign=function(e,t){var i=n.props,a=i.getClassNameFromAlign(t);n.currentAlignClassName!==a&&(n.currentAlignClassName=a,e.className=n.getClassName(a)),i.onAlign(e,t)},n.getTarget=function(){return n.props.getRootDomNode()},n.savePopupRef=O.c.bind(n,"popupInstance"),n.saveAlignRef=O.c.bind(n,"alignInstance"),n}return f()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.rootNode=this.getPopupDomNode()}},{key:"getPopupDomNode",value:function(){return v.a.findDOMNode(this.popupInstance)}},{key:"getMaskTransitionName",value:function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t}},{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t}},{key:"getClassName",value:function(e){return this.props.prefixCls+" "+this.props.className+" "+e}},{key:"getPopupElement",value:function(){var e=this.savePopupRef,t=this.props,n=t.align,i=t.style,o=t.visible,r=t.prefixCls,l=t.destroyPopupOnHide,s=this.getClassName(this.currentAlignClassName||t.getClassNameFromAlign(n)),u=r+"-hidden";o||(this.currentAlignClassName=null);var p=a()({},i,this.getZIndexStyle()),c={className:s,prefixCls:r,ref:e,style:p};if(l)return m.a.createElement(y.default,{component:"",exclusive:!0,transitionAppear:!0,onAnimateLeave:t.onAnimateLeave,transitionName:this.getTransitionName()},o?m.a.createElement(g.a,{target:this.getTarget,key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:n,onAlign:this.onAlign},m.a.createElement(b.a,a()({visible:!0},c),t.children)):null);var f={xVisible:o};return m.a.createElement(y.default,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),onAnimateLeave:t.onAnimateLeave,showProp:"xVisible"},m.a.createElement(g.a,a()({target:this.getTarget,key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0},f,{childrenProps:{visible:"xVisible"},disabled:!o,align:n,onAlign:this.onAlign}),m.a.createElement(b.a,a()({hiddenClassName:u},c),t.children)))}},{key:"getZIndexStyle",value:function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e}},{key:"getMaskElement",value:function(){var e=this.props,t=void 0;if(e.mask){var n=this.getMaskTransitionName();t=m.a.createElement(C.a,{style:this.getZIndexStyle(),key:"mask",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible}),n&&(t=m.a.createElement(y.default,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},t))}return t}},{key:"render",value:function(){return m.a.createElement("div",null,this.getMaskElement(),this.getPopupElement())}}]),t}(d.Component);t.a=w},899:function(e,t,n){"use strict";var i=n(900);t.a=i.a},900:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){function n(){a&&(clearTimeout(a),a=null)}function i(){n(),a=setTimeout(e,t)}var a=void 0;return i.clear=n,i}var l=n(5),s=n.n(l),u=n(112),p=n.n(u),c=n(575),f=n(577),d=n(901),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.forceAlign=function(){var t=e.props;if(!t.disabled){var n=p.a.findDOMNode(e);t.onAlign(n,Object(c.a)(n,t.target(),t.align))}},e}return o(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()}},{key:"componentDidUpdate",value:function(e){var t=!1,n=this.props;if(!n.disabled)if(e.disabled||e.align!==n.align)t=!0;else{var i=e.target(),a=n.target();Object(d.a)(i)&&Object(d.a)(a)?t=!1:i!==a&&(t=!0)}t&&this.forceAlign(),n.monitorWindowResize&&!n.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()}},{key:"componentWillUnmount",value:function(){this.stopMonitorWindowResize()}},{key:"startMonitorWindowResize",value:function(){this.resizeHandler||(this.bufferMonitor=r(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=Object(f.a)(window,"resize",this.bufferMonitor))}},{key:"stopMonitorWindowResize",value:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)}},{key:"render",value:function(){var e=this.props,t=e.childrenProps,n=e.children,i=s.a.Children.only(n);if(t){var a={};for(var o in t)t.hasOwnProperty(o)&&(a[o]=this.props[t[o]]);return s.a.cloneElement(i,a)}return i}}]),t}(l.Component);h.defaultProps={target:function(){return window},onAlign:function(){},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1},t.a=h},901:function(e,t,n){"use strict";function i(e){return null!=e&&e==e.window}t.a=i},902:function(e,t,n){"use strict";var i=n(108),a=n.n(i),o=n(111),r=n.n(o),l=n(109),s=n.n(l),u=n(110),p=n.n(u),c=n(5),f=n.n(c),d=n(608),m=function(e){function t(){return a()(this,t),s()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.className;return e.visible||(t+=" "+e.hiddenClassName),f.a.createElement("div",{className:t,style:e.style},f.a.createElement(d.a,{className:e.prefixCls+"-content",visible:e.visible},e.children))}}]),t}(c.Component);t.a=m},903:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i={adjustX:1,adjustY:1},a=[0,0],o={left:{points:["cr","cl"],overflow:i,offset:[-4,0],targetOffset:a},right:{points:["cl","cr"],overflow:i,offset:[4,0],targetOffset:a},top:{points:["bc","tc"],overflow:i,offset:[0,-4],targetOffset:a},bottom:{points:["tc","bc"],overflow:i,offset:[0,4],targetOffset:a},topLeft:{points:["bl","tl"],overflow:i,offset:[0,-4],targetOffset:a},leftTop:{points:["tr","tl"],overflow:i,offset:[-4,0],targetOffset:a},topRight:{points:["br","tr"],overflow:i,offset:[0,-4],targetOffset:a},rightTop:{points:["tl","tr"],overflow:i,offset:[4,0],targetOffset:a},bottomRight:{points:["tr","br"],overflow:i,offset:[0,4],targetOffset:a},rightBottom:{points:["bl","br"],overflow:i,offset:[4,0],targetOffset:a},bottomLeft:{points:["tl","bl"],overflow:i,offset:[0,4],targetOffset:a},leftBottom:{points:["br","bl"],overflow:i,offset:[-4,0],targetOffset:a}}},904:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(482),o=i(a),r=n(484),l=i(r),s=n(108),u=i(s),p=n(111),c=i(p),f=n(109),d=i(f),m=n(110),h=i(m),v=n(483),g=i(v),y=n(5),b=i(y),C=n(498),O=i(C),w=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&(n[i[a]]=e[i[a]]);return n},P=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,i=e.prefixCls,a=e.icon,r=e.disabled,s=e.firstItem,u=e.activeStyle,p=w(e,["children","className","prefixCls","icon","disabled","firstItem","activeStyle"]),c=(0,g.default)(i+"-item",n,(0,l.default)({},i+"-item-disabled",r)),f=i+"-item-active ";return s&&(f+=i+"-item-fix-active-arrow"),b.default.createElement(O.default,{disabled:r,activeClassName:f,activeStyle:u},b.default.createElement("div",(0,o.default)({className:c},p),b.default.createElement("div",{className:i+"-item-container"},a?b.default.createElement("span",{className:i+"-item-icon","aria-hidden":"true"},a):null,b.default.createElement("span",{className:i+"-item-content"},t))))}}]),t}(b.default.Component);t.default=P,P.defaultProps={prefixCls:"am-popover",disabled:!1},P.myName="PopoverItem",e.exports=t.default}});