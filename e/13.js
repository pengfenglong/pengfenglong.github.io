webpackJsonp([13,56],{884:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l=a(2),r=n(l),c=a(4),i=n(c),o=a(3),u=n(o),s=a(1),d=n(s),p=a(17),f=a(14),h=f.Select.Option,m=f.Modal.confirm,y=f.Input.Search,E=function(e){function t(a){(0,r["default"])(this,t);var n=(0,i["default"])(this,e.call(this,a));return n.onSelectChange=function(e){n.setState({selectedRowKeys:e})},n.state={data:[],pageSize:10,selectedRowKeys:[]},n}return(0,u["default"])(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.actions.query({currentPage:1,pageSize:this.state.pageSize,channelId:this.props.channelId}),window.onhashchange=function(){e.props.actions.query({currentPage:1,pageSize:e.state.pageSize,channelId:e.props.channelId})}},t.prototype.componentWillReceiveProps=function(e){},t.prototype.handleSearch=function(e,t){this.props.actions.query({type:e,value:t,channelId:this.props.channelId})},t.prototype.handleDel=function(e){var t=this.props.actions.del;m({title:"\u63d0\u793a",content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",onOk:function(){t(e)},onCancel:function(){}})},t.prototype.handleBatchDel=function(){var e=this.state.selectedRowKeys,t=this.props.actions.batchDel;m({title:"\u63d0\u793a",content:"\u60a8\u786e\u5b9a\u8981\u6279\u91cf\u5220\u9664\u5417\uff1f",onOk:function(){t(e)},onCancel:function(){}})},t.prototype.handleAdd=function(){"0"==this.props.channelId?alert("\u8bf7\u9009\u62e9\u680f\u76ee"):window.location.hash="/cms/article/"+this.props.channelId+"/add"},t.prototype.render=function(){var e=this,t=[{title:"\u6240\u5c5e\u680f\u76ee",dataIndex:"channel_id",key:"channel_id"},{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u7b80\u4ecb",dataIndex:"summary",key:"summary"},{title:"\u72b6\u6001",dataIndex:"status",key:"status"},{title:"\u64cd\u4f5c",key:"operation",width:150,render:function(t,a){return d["default"].createElement("span",null,d["default"].createElement("a",{href:"javascript:void(0)",onClick:e.handleDel.bind(e,a.id)},"\u5220\u9664")," \xa0|\xa0",d["default"].createElement(p.Link,{to:"/cms/article/edit/"+a.id},"\u7f16\u8f91"))}}],a={total:this.props.data.total,pageSize:this.state.pageSize,showSizeChanger:!0,showTotal:function(e,t){return t[0]+"-"+t[1]+"of"+e+"items"},onShowSizeChange:function(t,a){e.setState({pageSize:a}),e.props.actions.query({currentPage:t,pageSize:a,channelId:e.props.channelId})},onChange:function(t){e.props.actions.query({currentPage:t,pageSize:e.state.pageSize,channelId:e.props.channelId})}},n=this.state.selectedRowKeys,l={selectedRowKeys:n,onChange:this.onSelectChange},r=n.length>0;return d["default"].createElement("div",{className:"list-box"},d["default"].createElement("div",{className:"toolbar"},d["default"].createElement("span",{className:"btn"},d["default"].createElement(f.Button,{type:"primary",onClick:this.handleAdd.bind(this)},"\u53d1\u5e03\u6587\u7ae0"),"\xa0",d["default"].createElement(f.Button,{type:"primary",onClick:this.handleBatchDel.bind(this),disabled:!r},"\u6279\u91cf\u5220\u9664")),d["default"].createElement("span",{className:"search"},d["default"].createElement("div",{className:"ant-search-input-wrapper"},d["default"].createElement(f.Select,{defaultValue:"name",style:{width:100},onChange:function(e){type=e}},d["default"].createElement(h,{value:"channel_id"},"\u6240\u5c5e\u680f\u76ee"),d["default"].createElement(h,{value:"title"},"\u6807\u9898"),d["default"].createElement(h,{value:"summary"},"\u7b80\u4ecb"),d["default"].createElement(h,{value:"content"},"\u5185\u5bb9"),d["default"].createElement(h,{value:"image"},"\u5c01\u9762\u56fe"),d["default"].createElement(h,{value:"keywords"},"\u5173\u952e\u5b57"),d["default"].createElement(h,{value:"remarks"},"remarks"),d["default"].createElement(h,{value:"allow_comment"},"\u662f\u5426\u5141\u8bb8\u8bc4\u8bba"),d["default"].createElement(h,{value:"status"},"\u72b6\u6001(-1:\u4e0d\u901a\u8fc7,0\u672a\u5ba1\u6838,1:\u901a\u8fc7)"),d["default"].createElement(h,{value:"sort"},"\u6392\u5e8f"),d["default"].createElement(h,{value:"hits"},"\u70b9\u51fb\u91cf"),d["default"].createElement(h,{value:"creator"},"creator"),d["default"].createElement(h,{value:"updater"},"updater"),d["default"].createElement(h,{value:"create_time"},"create_time"),d["default"].createElement(h,{value:"update_time"},"update_time")),"\xa0",d["default"].createElement(y,{placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9",style:{width:250},onSearch:function(t){var a=e.type?e.type:"channel_id";e.handleSearch(a,t)}})))),d["default"].createElement(f.Table,{rowKey:"id",rowSelection:l,columns:t,dataSource:this.props.data.result,pagination:a,loading:!1}))},t}(d["default"].Component);t["default"]=E,e.exports=t["default"]},891:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),c=l(r),i=a(4),o=l(i),u=a(3),s=l(u),d=a(1),p=l(d),f=a(24),h=a(13),m=a(17),y=a(14);a(1156);var E=a(91),v=n(E),g=a(103),S=n(g),I=a(219),b=n(I),w=a(884),k=l(w),_=y.Layout.Header,C=y.Layout.Sider,x=y.Layout.Content,z=(y.Menu.SubMenu,y.Tree.TreeNode),D=function(e){function t(a){(0,c["default"])(this,t);var n=(0,o["default"])(this,e.call(this,a));return n.state={siteName:"",channelTreeData:[]},n}return(0,s["default"])(t,e),t.prototype.componentDidMount=function(){var e=this;S.getTree(this.props.params.siteId,function(t){e.setState({channelTreeData:t.data.result})}),v.get(this.props.params.siteId,function(t){e.setState({siteName:t.data.name})})},t.prototype.onChannelSelect=function(e,t){window.location.hash="/cms/channel_article/"+this.props.params.siteId+"/"+e[0]},t.prototype.render=function(){var e=function t(e){return e.map(function(e){return e.children?p["default"].createElement(z,{key:e.id,title:e.name,value:e.id},t(e.children)):p["default"].createElement(z,{key:e.id,title:e.name,value:e.id})})};return p["default"].createElement(y.Layout,{style:{height:"calc(100vh - 100)"}},p["default"].createElement(_,{style:{background:"#fff",margin:"0 0 5px 0",height:"35px","line-height":"35px",padding:"0 10px"}},p["default"].createElement(y.Breadcrumb,null,p["default"].createElement(y.Breadcrumb.Item,null,p["default"].createElement(m.Link,{to:"/app/cms"},p["default"].createElement(y.Icon,{type:"left"}),"\u8fd4\u56de\u7ad9\u70b9\u7ba1\u7406")),p["default"].createElement(y.Breadcrumb.Item,null,"\u9996\u9875"),p["default"].createElement(y.Breadcrumb.Item,null,"\u5185\u5bb9\u7ba1\u7406"),p["default"].createElement(y.Breadcrumb.Item,null,"\u680f\u76ee\u6587\u7ae0\u7ba1\u7406"))),p["default"].createElement(y.Layout,{style:{background:"#fff"}},p["default"].createElement(C,{style:{background:"#fff","margin-top":"5px"}},p["default"].createElement(m.Link,{to:"/cms/channel/"+this.props.params.siteId},"\u680f\u76ee\u7ba1\u7406"),p["default"].createElement(y.Tree,{showLine:!0,defaultExpandAll:!0,onSelect:this.onChannelSelect.bind(this)},p["default"].createElement(z,{value:"0",title:"\u7ad9\u70b9 - "+this.state.siteName,key:"0"},e(this.state.channelTreeData)))),p["default"].createElement(x,{style:{background:"#fff","margin-top":"5px"}},p["default"].createElement(k["default"],{channelId:this.props.params.channelId,data:this.props.articles,actions:this.props.articleActions}))))},t}(d.Component),M=function(e){return{channels:e.cms.channels,articles:e.cms.articles}},B=function(e){return{channelActions:(0,f.bindActionCreators)(S,e),articleActions:(0,f.bindActionCreators)(b,e)}};t["default"]=(0,h.connect)(M,B)(D),e.exports=t["default"]},1156:1148});