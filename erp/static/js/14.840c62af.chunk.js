webpackJsonp([14],{485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(490),r=(n.n(a),n(491)),l=n.n(r),s=n(496),c=(n.n(s),n(497)),i=n.n(c),u=n(527),o=(n.n(u),n(528)),d=n.n(o),m=n(6),p=n.n(m),f=n(113),E=n.n(f),h=n(108),g=n.n(h),y=n(111),v=n.n(y),w=n(109),x=n.n(w),b=n(110),I=n.n(b),k=n(505),_=(n.n(k),n(506)),S=n.n(_),q=n(5),L=n.n(q),j=n(187),O=(n.n(j),n(20)),z=l.a.Item,D=(S.a.prompt,function(e){function t(e){g()(this,t);var n=x()(this,(t.__proto__||E()(t)).call(this,e));return n.state={details:{user:[],process:[]},department:{},selectedIndex:0},n}return I()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this;this.handleQuery(0),Object(O.d)({url:"rest/dingtalk/department/getDetail?corpId="+O.f.get("corpId")+"&deptId="+(this.props.params.departmentId?this.props.params.departmentId:window.loginUser.department[0]+""),type:"get",success:function(t){e.setState({department:t.data})}}),window.dd.biz.navigation.setLeft({control:!0,text:"\u8fd4\u56de",onSuccess:function(e){},onFail:function(e){}}),window.dd.biz.navigation.setTitle({title:"\u5c0f\u7ec4\u8ba1\u4ef6\u7edf\u8ba1",onSuccess:function(e){},onFail:function(e){}}),window.dd.biz.navigation.setRight({show:!0,control:!0,text:"...",onSuccess:function(e){},onFail:function(e){}})}},{key:"handleQuery",value:function(e){var t=this,n=null;0===e?n="today":1===e?n="thisweek":2===e?n="thismonth":3===e?n="thisyear":4===e&&(n="total"),Object(O.d)({url:"rest/erp/userWork/queryDepartmentWork?filter="+p()({cycle:n,departmentId:this.props.params.departmentId?this.props.params.departmentId:window.loginUser.department[0]+""}),type:"get",success:function(n){t.setState({details:n.data,selectedIndex:e})}})}},{key:"render",value:function(){var e=this,t=0,n=0,a=0,r=0;return this.state.details.user.forEach(function(e){t+=1,a+=e.quantity?e.quantity:0,r+=e.wages?e.wages:0}),this.state.details.process.forEach(function(e){n+=1}),L.a.createElement("div",null,L.a.createElement("div",{style:{margin:5}},L.a.createElement("span",null,"\u5f53\u524d\u5c0f\u7ec4\uff1a"),this.state.department.name),L.a.createElement("div",{style:{margin:"0 5px"}},L.a.createElement(d.a,{values:["\u5f53\u65e5","\u5f53\u5468","\u5f53\u6708","\u5f53\u5e74","\u5168\u90e8"],selectedIndex:this.state.selectedIndex,onChange:function(t){var n=t.nativeEvent.selectedSegmentIndex;e.handleQuery(n)}})),L.a.createElement("div",null,L.a.createElement(l.a,{renderHeader:function(){return"\u7d2f\u8ba1"}},L.a.createElement(z,{extra:t},"\u603b\u4eba\u6570"),L.a.createElement(z,{extra:n},"\u603b\u5de5\u5e8f\u6570"),L.a.createElement(z,{extra:a},"\u603b\u8ba1\u4ef6\u6570"),L.a.createElement(z,{extra:"\xa5"+r},"\u603b\u8ba1\u4ef6\u5de5\u8d44"),L.a.createElement(z,{extra:"\xa5"+(r&&t?r/t:0)},"\u4eba\u5747\u8ba1\u4ef6\u5de5\u8d44")),L.a.createElement(i.a,null),L.a.createElement(l.a,{renderHeader:function(){return"\u5458\u5de5\u7ef4\u5ea6\u660e\u7ec6"}},L.a.createElement(z,{extra:L.a.createElement("b",null,L.a.createElement("span",null,"\u5de5\u4ef6\u6570"),L.a.createElement("span",{style:{marginLeft:20}},"\u5de5\u8d44")),style:{background:"#fff9f9"}},L.a.createElement("b",null,"\u5458\u5de5")),this.state.details.user.map(function(e){return L.a.createElement(z,{extra:L.a.createElement("b",null,L.a.createElement("span",null,e.quantity),L.a.createElement("span",{style:{marginLeft:20}},e.wages))},e.user_name)})),L.a.createElement(i.a,null),L.a.createElement(l.a,{renderHeader:function(){return"\u5de5\u5e8f\u7ef4\u5ea6\u660e\u7ec6"}},L.a.createElement(z,{extra:L.a.createElement("b",null,L.a.createElement("span",null,"\u5de5\u4ef6\u6570"),L.a.createElement("span",{style:{marginLeft:20}},"\u5de5\u8d44")),style:{background:"#fff9f9"}},L.a.createElement("b",null,"\u5de5\u5e8f")),this.state.details.process.map(function(e){return L.a.createElement(z,{extra:L.a.createElement("b",null,L.a.createElement("span",null,e.quantity),L.a.createElement("span",{style:{marginLeft:20}},e.wages))},e.process_name)}))))}}]),t}(L.a.Component));D=Object(j.connect)()(D),t.default=D}});