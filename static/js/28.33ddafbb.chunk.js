webpackJsonp([28],{497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=n.n(a),s=n(113),l=n.n(s),c=n(108),o=n.n(c),i=n(111),u=n.n(i),d=n(109),p=n.n(d),m=n(110),y=n.n(m),h=n(5),E=n.n(h),f=n(187),w=(n.n(f),n(505)),v=n(20),_=w.h.Item,k=(w.i.prompt,function(e){function t(e){o()(this,t);var n=p()(this,(t.__proto__||l()(t)).call(this,e));return n.state={works:[],totalWages:0,selectedIndex:0},n}return y()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.handleQuery(0),window.dd.biz.navigation.setLeft({control:!0,text:"\u8fd4\u56de",onSuccess:function(e){},onFail:function(e){}}),window.dd.biz.navigation.setTitle({title:"\u67e5\u770b\u6211\u7684\u8ba1\u4ef6\u7edf\u8ba1",onSuccess:function(e){},onFail:function(e){}}),window.dd.biz.navigation.setRight({show:!0,control:!0,text:"...",onSuccess:function(e){},onFail:function(e){}})}},{key:"handleQuery",value:function(e){var t=this,n=null;0===e?n="today":1===e?n="thisweek":2===e?n="thismonth":3===e?n="thisyear":4===e&&(n="total"),Object(v.e)({url:"rest/erp/userWork/queryMyWork?filter="+r()({cycle:n}),type:"get",success:function(n){var a=function(e){for(var t=0;t<r.length;t++)if(r[t].work_date===e)return r[t];return null},r=[],s=0;n.data.forEach(function(e){1!==e.status&&2!==e.status||(s+=e.process_price*e.quantity),a(e.work_date)?(a(e.work_date).wages=a(e.work_date).wages+e.process_price*e.quantity,a(e.work_date).processs.push({name:e.process_name,price:e.process_price,quantity:e.quantity})):r.push({work_date:e.work_date,status:e.status,wages:e.process_price*e.quantity,processs:[{name:e.process_name,price:e.process_price,quantity:e.quantity}]})}),t.setState({works:r,totalWages:s,selectedIndex:e})}})}},{key:"render",value:function(){var e=this;return E.a.createElement("div",null,E.a.createElement(w.k,null,"\u53ea\u6709\u7ba1\u7406\u5458\u5ba1\u6838\u901a\u8fc7\u7684\u8ba1\u4ef6\u624d\u4f1a\u8ba1\u7b97\u5de5\u8d44"),E.a.createElement("div",{style:{margin:"0 5px"}},E.a.createElement(w.p,{values:["\u5f53\u65e5","\u5f53\u5468","\u5f53\u6708","\u5f53\u5e74","\u5168\u90e8"],selectedIndex:this.state.selectedIndex,onChange:function(t){var n=t.nativeEvent.selectedSegmentIndex;e.handleQuery(n)}})),E.a.createElement("div",null,E.a.createElement(w.h,null,E.a.createElement(_,{extra:E.a.createElement("b",{style:{color:"red"}},"\xa5",this.state.totalWages)},"\u603b\u5de5\u8d44")),E.a.createElement(w.u,null),this.state.works.map(function(e){var t=null;return e.status?1===e.status?t=E.a.createElement("span",{style:{color:"#00BFFF"}},"\u7ec4\u957f\u5df2\u5ba1\u6838"):2===e.status?t=E.a.createElement("span",{style:{color:"#0000CD"}},"\u7ba1\u7406\u5458\u5df2\u5ba1\u6838"):-1===e.status?t=E.a.createElement("span",{style:{color:"red"}},"\u5ba1\u6838\u672a\u901a\u8fc7"):0===e.status&&(t=E.a.createElement("span",{style:{color:"#ccc"}},"\u672a\u5ba1\u6838")):t=E.a.createElement("span",{style:{color:"#ccc"}},"\u672a\u5ba1\u6838"),E.a.createElement("div",{style:{margin:"10px 5px"}},E.a.createElement(w.b,null,E.a.createElement(w.b.Header,{title:E.a.createElement("div",{style:{width:250}},e.work_date,E.a.createElement("b",null,"\xa0(\xa5",e.wages,")")),extra:t}),E.a.createElement(w.b.Body,null,E.a.createElement(w.h,null,e.processs.map(function(e){return E.a.createElement(_,{extra:e.quantity+"\u4ef6"},E.a.createElement("span",null,e.name)," \xa0",E.a.createElement("span",null,"(\xa5",e.price,")")," \xa0")})))))})))}}]),t}(E.a.Component));k=Object(f.connect)()(k),t.default=k}});